ART
###############################################################################

Android 4.4から追加された、LLVMを内包したJavaVM
compilerとRuntimeとdex系ツールから構成

予習
*******************************************************************************

http://d.hatena.ne.jp/embedded/20131104/p1

まとめ。
===============================================================================

Android 4.4で試験的に導入されたartはdexコードをターゲット側でAOTコンパイルするもの。
llvm使用。コンパイル結果はファイルとして保存されるので、次回以降はコンパイル済みのコードが使用される。

oat形式
===============================================================================

dexからoat形式に変換する。
elfの書き込みらしいコードもあるので、きっとelfの一種だろう。llvmを使用している。
oatはelf形式の共有オブジェクトを含んでいるようだ
もともとは独自フォーマットだったけど、、今はELF dynamic object

LLVM
===============================================================================

dexからoatへの変換は途中でllvmのbitcodeを経由して、そこで最適化のパスを通るはず。
この最適化でベクタライズもするんだろうな。最新の最適化の技術がそのまま使えるのが強み。

Runtime
===============================================================================

runtimeの中にdexのインタープリタもあるな。
AOTだけじゃなくてJITとしても使えるのかな。
バックグランドでコンパイルして適当なタイミングで差し替えるような。

libart-compiler はtargetとhostの両方でコンパイルされている。
つまりdexからoatへの変換はhostだけでなくtargetでもできるということ。

openDexFileNativeというネイティブメソッドがdalvikとartの両方にある。
artの下のものは、その中でdex2oatコマンドをexecしている。

GC
===============================================================================

DalvikVMと同様にコンカレントGCのようです。


Author
===============================================================================

拡張子が.ccなのは、V8やDart VM風だけど、AuthorはV8やDart VMと被っていない。



