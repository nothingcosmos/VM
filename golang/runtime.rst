pkg/runtime/runtime
###############################################################################

主要なruntimeの関数の実装を追う

sched系
*******************************************************************************


gosched(void) and gosched0(G*)
===============================================================================



===============================================================================
===============================================================================
===============================================================================


time.Sleep()
===============================================================================

src/pkg/time/Sleep.goの中身は、Cの関数の宣言のみだった。

runtime/time.goc:func Sleep(ns int64) ::
  runtime..tsleep(ns, "sleep")

    Timer t;
    if(ns <= 0)
      return;
    t.when = runtime·nanotime() + ns;
    t.period = 0;   //timerproc()での監視間隔
    t.fv = &readyv;
    t.arg.data = g;
    runtime·lock(&timers);
    addtimer(&t);
    runtime·parkunlock(&timers, reason);

    //parkunlockの第1引数はlock済みのオブジェクトなのか？

    // Puts the current goroutine into a waiting state and unlocks the lock.
    // The goroutine can be made runnable again by calling runtime·ready(gp).
    void
    runtime·parkunlock(Lock *lock, int8 *reason)
    {
            runtime·park(parkunlock, lock, reason);
    }




===============================================================================
===============================================================================
===============================================================================
===============================================================================
===============================================================================


*******************************************************************************

===============================================================================
===============================================================================

template ::
  ###############################################################################
  *******************************************************************************
  ===============================================================================

